---
title: Fantasy Football Player Rankings
author: ~
date: '2018-08-13'
slug: fantasy-football-player-rankings
categories: []
tags: []
---



<p>Accurate prediction of player performance is of immense value to those of use who play fantasy football. With this in mind, I was curious about how well simple prediction models could perform in this context. Conveniently, Sean J. Taylor provided some nice code to make <a href="https://gist.github.com/seanjtaylor/b4d423dad0083cc8cc5b2a9fd1e4e63e">2017 fantasy football projections</a> which we can use to make 2018 predictions. Looking at his predictions for 2017, I’m not overly optimistic about how the models will perform. At any rate, it ought to be fun to see what theys produce.</p>
<p>My code is mostly identical to Sean’s except I’ve updated some of the year values so that it predicts for the 2018 season and makes use of armchair analysis data from 2017. Since I only changed a few values in the original code to create the analysis datasets, I’ve decided not to display it. However, while running the block of Sean’s code to generate the actual predictions, I encountered some errors having to do with his use of the return() function. Because of this, I’m going to display the code I used to generate the 2018 predictions.</p>
<div id="predictions" class="section level3">
<h3>Predictions</h3>
<p>The code to generate the predictions is a little tricky, since it uses dplyr’s non standard evaluation (it’s generates them within the do() function). You’ll notice within the if else block of code I’ve removed the return function. The code builds separate models for rushing attempts, passing attempts, receiving yards, etc. for a total of 12 models. The first three metrics, rushing attempts, receiving targets, and passing attempts are the “opportunity” metrics and are modeled using a k-nearest neighbors algorithm. The justification for this that Sean provides is that penalized linear models used for other 9 rate metics would “shrink” the predictions too much (push them toward the average). The ultimate projections for player performance are heavily influenced by the opportunity projections, so it’s very important to get them right.</p>
<pre class="r"><code>mySummary &lt;- function(data, lev = NULL, model = NULL) {
    out &lt;- c(mean(abs(data$obs - data$pred)), 
                     Evaluation.NDCG(order(data$pred), data$obs))
    names(out) &lt;- c(&#39;MAE&#39;, &#39;NDCG&#39;)
    out
}
ctrl &lt;- trainControl(method = &#39;cv&#39;,
                                         number = 10,
                                         summaryFunction = mySummary)

config &lt;- data_frame(metric = c(&#39;ra&#39;, &#39;trg&#39;, &#39;pa&#39;, &#39;rec_trg&#39;, &#39;ry_ra&#39;, &#39;tdr_ra&#39;, &#39;tdrec_trg&#39;, &#39;recy_trg&#39;, &#39;py_pa&#39;, &#39;tdp_pa&#39;, &#39;ints_pa&#39;, &#39;fuml_ratrg&#39;),
                                         method = c(&#39;kknn&#39;, &#39;kknn&#39;, &#39;kknn&#39;, rep(&#39;glmnet&#39;, 9)),
                                         outcome.metric = c(&#39;NDCG&#39;, &#39;NDCG&#39;, &#39;NDCG&#39;, rep(&#39;RMSE&#39;, 9)),
                                         maximize = c(TRUE, TRUE, TRUE, rep(FALSE, 9)),
                                         key = 1)


positions &lt;- data_frame(pos1 = c(&#39;WR&#39;, &#39;TE&#39;, &#39;RB&#39;, &#39;QB&#39;), key = 1)
cutoffs &lt;- data_frame(cutoff = 2016:2017, key = 1)


preds &lt;- config %&gt;%
    inner_join(positions) %&gt;%
    inner_join(cutoffs) %&gt;%
    group_by(metric, pos1, cutoff) %&gt;% do({
        my.metric &lt;- first(.$metric)
        my.pos &lt;- first(.$pos1)
        my.cutoff &lt;- first(.$cutoff)
        for.reg &lt;- season.metrics %&gt;%
            filter(metric == my.metric) %&gt;%
            dplyr::select(player, seas, value) %&gt;%
            inner_join(features, by = c(&#39;player&#39;, &#39;seas&#39;)) %&gt;%
            filter(pos1 == my.pos) %&gt;%
            ungroup()
        if (str_detect(my.metric, &#39;pa&#39;) &amp; my.pos != &#39;QB&#39;) {
            for.reg$yhat &lt;- 0
            for.reg %&gt;% select(player, seas, yhat = yhat)
        } else if (str_detect(my.metric, &#39;trg&#39;) &amp; my.pos == &#39;QB&#39;) {
            for.reg$yhat &lt;- 0
            for.reg %&gt;% select(player, seas, yhat = yhat)
        } else if (str_detect(my.metric, &#39;ra&#39;) &amp; my.pos %in% c(&#39;TE&#39;, &#39;WR&#39;)) {
            for.reg$yhat &lt;- 0
            for.reg %&gt;% select(player, seas, yhat = yhat)
        } else {
        X &lt;- model.matrix( ~ 0 + ., for.reg %&gt;% dplyr::select(-player, -value, -pos1))
        nzv &lt;- nearZeroVar(X)
        X &lt;- X[, -nzv]
        y &lt;- with(for.reg, value)
        trainable &lt;- !is.na(y) &amp; (for.reg$seas &lt;= my.cutoff)
        fit &lt;- train(X[trainable,],y[trainable],
                                 metric = first(.$outcome.metric),
                                 method = first(.$method),
                                 maximize = first(.$maximize),
                                 trControl = ctrl,
                                 preProcess = c(&quot;center&quot;, &quot;scale&quot;))
        for.reg$yhat &lt;- predict(fit, X)
        for.reg %&gt;% dplyr::select(player, seas, yhat = yhat)
        }
    })</code></pre>
</div>
<div id="rankings-based-on-predictions" class="section level3">
<h3>Rankings based on Predictions</h3>
<pre class="r"><code>rnks &lt;- preds %&gt;%
    spread(metric, yhat) %&gt;%
    mutate(py = pa * py_pa,
                 tdp = pa * tdp_pa,
                 ints = pa * ints_pa,
                 rec = trg * rec_trg,
                 recy = trg * recy_trg,
                 ry = ra * ry_ra,
                 td = trg * tdrec_trg+ ra * tdr_ra,
                 fuml = fuml_ratrg * (ra + pa + trg),
                 fpts = py / 25 
                 + recy / 15 
                 + ry / 10 
                 + rec * 0.5 
                 + (td + tdp) * 6 
                 + ints * -2 
                 + fuml * -2) %&gt;%
    left_join(player %&gt;% select(player, pos1, fname, lname)) %&gt;%
    dplyr::select(seas, player, fname, lname, pos1, fpts) %&gt;%
    group_by(cutoff, seas, pos1) %&gt;%
    arrange(-fpts) %&gt;%
    mutate(rnk = row_number())</code></pre>
<pre><code>## Joining, by = c(&quot;pos1&quot;, &quot;player&quot;)</code></pre>
<pre><code>## Adding missing grouping variables: `cutoff`</code></pre>
<div id="running-back-rankings" class="section level4">
<h4>Running Back Rankings</h4>
<pre class="r"><code>rnks %&gt;% filter(pos1 == &#39;RB&#39;, seas == 2018, cutoff == 2017) %&gt;% 
  dplyr::select(player,fname,lname,pos1,fpts,rnk) %&gt;%
  .[1:20,] %&gt;% knitr::kable()</code></pre>
<pre><code>## Adding missing grouping variables: `cutoff`, `seas`</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">cutoff</th>
<th align="right">seas</th>
<th align="left">player</th>
<th align="left">fname</th>
<th align="left">lname</th>
<th align="left">pos1</th>
<th align="right">fpts</th>
<th align="right">rnk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LB-0250</td>
<td align="left">Le’Veon</td>
<td align="left">Bell</td>
<td align="left">RB</td>
<td align="right">215.4427</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LF-0650</td>
<td align="left">Leonard</td>
<td align="left">Fournette</td>
<td align="left">RB</td>
<td align="right">205.4761</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DM-4300</td>
<td align="left">DeMarco</td>
<td align="left">Murray</td>
<td align="left">RB</td>
<td align="right">203.3259</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LM-1000</td>
<td align="left">LeSean</td>
<td align="left">McCoy</td>
<td align="left">RB</td>
<td align="right">199.9459</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">FG-0200</td>
<td align="left">Frank</td>
<td align="left">Gore</td>
<td align="left">RB</td>
<td align="right">180.6542</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TG-1950</td>
<td align="left">Todd</td>
<td align="left">Gurley</td>
<td align="left">RB</td>
<td align="right">177.3315</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MI-0100</td>
<td align="left">Mark</td>
<td align="left">Ingram</td>
<td align="left">RB</td>
<td align="right">171.8154</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JH-5575</td>
<td align="left">Jordan</td>
<td align="left">Howard</td>
<td align="left">RB</td>
<td align="right">158.1608</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">KH-2850</td>
<td align="left">Kareem</td>
<td align="left">Hunt</td>
<td align="left">RB</td>
<td align="right">157.1811</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DF-1875</td>
<td align="left">Devonta</td>
<td align="left">Freeman</td>
<td align="left">RB</td>
<td align="right">150.4969</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CH-5000</td>
<td align="left">Carlos</td>
<td align="left">Hyde</td>
<td align="left">RB</td>
<td align="right">150.1606</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JA-0450</td>
<td align="left">Jay</td>
<td align="left">Ajayi</td>
<td align="left">RB</td>
<td align="right">141.6486</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LM-1150</td>
<td align="left">Lamar</td>
<td align="left">Miller</td>
<td align="left">RB</td>
<td align="right">141.0932</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MG-1150</td>
<td align="left">Melvin</td>
<td align="left">Gordon</td>
<td align="left">RB</td>
<td align="right">139.9217</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">IC-0300</td>
<td align="left">Isaiah</td>
<td align="left">Crowell</td>
<td align="left">RB</td>
<td align="right">138.7915</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">Ronald Jones II</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">RB</td>
<td align="right">133.4248</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CM-1225</td>
<td align="left">Christian</td>
<td align="left">McCaffrey</td>
<td align="left">RB</td>
<td align="right">133.0426</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LM-1850</td>
<td align="left">Latavius</td>
<td align="left">Murray</td>
<td align="left">RB</td>
<td align="right">132.4538</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MF-1300</td>
<td align="left">Matt</td>
<td align="left">Forte</td>
<td align="left">RB</td>
<td align="right">131.4645</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AK-0050</td>
<td align="left">Alvin</td>
<td align="left">Kamara</td>
<td align="left">RB</td>
<td align="right">130.3700</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
<div id="wide-receiver-rankings" class="section level4">
<h4>Wide Receiver Rankings</h4>
<pre class="r"><code>rnks %&gt;% filter(pos1 == &#39;WR&#39;, seas == 2018, cutoff == 2017) %&gt;% 
  dplyr::select(player,fname,lname,pos1,fpts,rnk) %&gt;%
  .[1:20,] %&gt;% knitr::kable()</code></pre>
<pre><code>## Adding missing grouping variables: `cutoff`, `seas`</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">cutoff</th>
<th align="right">seas</th>
<th align="left">player</th>
<th align="left">fname</th>
<th align="left">lname</th>
<th align="left">pos1</th>
<th align="right">fpts</th>
<th align="right">rnk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JJ-4700</td>
<td align="left">Julio</td>
<td align="left">Jones</td>
<td align="left">WR</td>
<td align="right">178.7398</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AB-3500</td>
<td align="left">Antonio</td>
<td align="left">Brown</td>
<td align="left">WR</td>
<td align="right">176.9903</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LF-0200</td>
<td align="left">Larry</td>
<td align="left">Fitzgerald</td>
<td align="left">WR</td>
<td align="right">164.6259</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">ME-0600</td>
<td align="left">Mike</td>
<td align="left">Evans</td>
<td align="left">WR</td>
<td align="right">149.0616</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TH-1850</td>
<td align="left">Ty</td>
<td align="left">Hilton</td>
<td align="left">WR</td>
<td align="right">145.0079</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JL-0215</td>
<td align="left">Jarvis</td>
<td align="left">Landry</td>
<td align="left">WR</td>
<td align="right">141.7893</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">RM-1500</td>
<td align="left">Rishard</td>
<td align="left">Matthews</td>
<td align="left">WR</td>
<td align="right">138.5234</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DB-5300</td>
<td align="left">Dez</td>
<td align="left">Bryant</td>
<td align="left">WR</td>
<td align="right">132.4038</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AG-1500</td>
<td align="left">A.J.</td>
<td align="left">Green</td>
<td align="left">WR</td>
<td align="right">131.2524</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">GT-0100</td>
<td align="left">Golden</td>
<td align="left">Tate</td>
<td align="left">WR</td>
<td align="right">130.7704</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">BC-2325</td>
<td align="left">Brandin</td>
<td align="left">Cooks</td>
<td align="left">WR</td>
<td align="right">128.0500</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DT-0900</td>
<td align="left">Demaryius</td>
<td align="left">Thomas</td>
<td align="left">WR</td>
<td align="right">122.2746</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DH-3950</td>
<td align="left">DeAndre</td>
<td align="left">Hopkins</td>
<td align="left">WR</td>
<td align="right">122.2129</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AT-0350</td>
<td align="left">Adam</td>
<td align="left">Thielen</td>
<td align="left">WR</td>
<td align="right">119.4316</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">PG-0100</td>
<td align="left">Pierre</td>
<td align="left">Garcon</td>
<td align="left">WR</td>
<td align="right">119.1293</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MC-2900</td>
<td align="left">Michael</td>
<td align="left">Crabtree</td>
<td align="left">WR</td>
<td align="right">118.0380</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DB-0500</td>
<td align="left">Doug</td>
<td align="left">Baldwin</td>
<td align="left">WR</td>
<td align="right">117.1213</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JS-4750</td>
<td align="left">Juju</td>
<td align="left">Smith-Schuster</td>
<td align="left">WR</td>
<td align="right">115.4172</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CK-1300</td>
<td align="left">Cooper</td>
<td align="left">Kupp</td>
<td align="left">WR</td>
<td align="right">115.0892</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MB-4550</td>
<td align="left">Martavis</td>
<td align="left">Bryant</td>
<td align="left">WR</td>
<td align="right">112.0642</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
<div id="quarterback-rankings" class="section level4">
<h4>Quarterback Rankings</h4>
<pre class="r"><code>rnks %&gt;% filter(pos1 == &#39;QB&#39;, seas == 2018, cutoff == 2017) %&gt;%
  dplyr::select(player,fname,lname,pos1,fpts,rnk) %&gt;%
  .[1:20,] %&gt;% knitr::kable()</code></pre>
<pre><code>## Adding missing grouping variables: `cutoff`, `seas`</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">cutoff</th>
<th align="right">seas</th>
<th align="left">player</th>
<th align="left">fname</th>
<th align="left">lname</th>
<th align="left">pos1</th>
<th align="right">fpts</th>
<th align="right">rnk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CN-0500</td>
<td align="left">Cam</td>
<td align="left">Newton</td>
<td align="left">QB</td>
<td align="right">328.2320</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DB-3800</td>
<td align="left">Drew</td>
<td align="left">Brees</td>
<td align="left">QB</td>
<td align="right">326.2442</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TB-2300</td>
<td align="left">Tom</td>
<td align="left">Brady</td>
<td align="left">QB</td>
<td align="right">324.2403</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MS-4100</td>
<td align="left">Matthew</td>
<td align="left">Stafford</td>
<td align="left">QB</td>
<td align="right">323.5988</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">MR-2500</td>
<td align="left">Matt</td>
<td align="left">Ryan</td>
<td align="left">QB</td>
<td align="right">323.4057</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">BB-2425</td>
<td align="left">Blake</td>
<td align="left">Bortles</td>
<td align="left">QB</td>
<td align="right">319.7643</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">PR-0300</td>
<td align="left">Philip</td>
<td align="left">Rivers</td>
<td align="left">QB</td>
<td align="right">318.7249</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">RW-3850</td>
<td align="left">Russell</td>
<td align="left">Wilson</td>
<td align="left">QB</td>
<td align="right">311.1636</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">KC-2350</td>
<td align="left">Kirk</td>
<td align="left">Cousins</td>
<td align="left">QB</td>
<td align="right">308.0833</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JG-1850</td>
<td align="left">Jared</td>
<td align="left">Goff</td>
<td align="left">QB</td>
<td align="right">293.0441</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DC-0725</td>
<td align="left">Derek</td>
<td align="left">Carr</td>
<td align="left">QB</td>
<td align="right">289.4341</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">DP-2037</td>
<td align="left">Dak</td>
<td align="left">Prescott</td>
<td align="left">QB</td>
<td align="right">286.5810</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">EM-0200</td>
<td align="left">Eli</td>
<td align="left">Manning</td>
<td align="left">QB</td>
<td align="right">283.5398</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">BR-1100</td>
<td align="left">Ben</td>
<td align="left">Roethlisberger</td>
<td align="left">QB</td>
<td align="right">281.3730</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AD-0100</td>
<td align="left">Andy</td>
<td align="left">Dalton</td>
<td align="left">QB</td>
<td align="right">279.9740</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JF-1900</td>
<td align="left">Joe</td>
<td align="left">Flacco</td>
<td align="left">QB</td>
<td align="right">274.1218</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JC-6200</td>
<td align="left">Jay</td>
<td align="left">Cutler</td>
<td align="left">QB</td>
<td align="right">272.2124</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TT-0500</td>
<td align="left">Tyrod</td>
<td align="left">Taylor</td>
<td align="left">QB</td>
<td align="right">267.1779</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AR-1300</td>
<td align="left">Aaron</td>
<td align="left">Rodgers</td>
<td align="left">QB</td>
<td align="right">264.5544</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CP-0500</td>
<td align="left">Carson</td>
<td align="left">Palmer</td>
<td align="left">QB</td>
<td align="right">253.5234</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
<div id="tight-end-rankings" class="section level4">
<h4>Tight End Rankings</h4>
<pre class="r"><code>rnks %&gt;% filter(pos1 == &#39;TE&#39;, seas == 2018, cutoff == 2017) %&gt;% 
  dplyr::select(player,fname,lname,pos1,fpts,rnk) %&gt;%
  .[1:20,] %&gt;% knitr::kable()</code></pre>
<pre><code>## Adding missing grouping variables: `cutoff`, `seas`</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">cutoff</th>
<th align="right">seas</th>
<th align="left">player</th>
<th align="left">fname</th>
<th align="left">lname</th>
<th align="left">pos1</th>
<th align="right">fpts</th>
<th align="right">rnk</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TK-0150</td>
<td align="left">Travis</td>
<td align="left">Kelce</td>
<td align="left">TE</td>
<td align="right">148.11218</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JG-2900</td>
<td align="left">Jimmy</td>
<td align="left">Graham</td>
<td align="left">TE</td>
<td align="right">137.32173</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">ZE-0100</td>
<td align="left">Zach</td>
<td align="left">Ertz</td>
<td align="left">TE</td>
<td align="right">135.75456</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">EE-0400</td>
<td align="left">Evan</td>
<td align="left">Engram</td>
<td align="left">TE</td>
<td align="right">134.18324</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JW-6000</td>
<td align="left">Jason</td>
<td align="left">Witten</td>
<td align="left">TE</td>
<td align="right">110.39928</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">KR-1200</td>
<td align="left">Kyle</td>
<td align="left">Rudolph</td>
<td align="left">TE</td>
<td align="right">106.56947</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">RG-2200</td>
<td align="left">Rob</td>
<td align="left">Gronkowski</td>
<td align="left">TE</td>
<td align="right">101.79246</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">AG-0500</td>
<td align="left">Antonio</td>
<td align="left">Gates</td>
<td align="left">TE</td>
<td align="right">101.16792</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">EE-0050</td>
<td align="left">Eric</td>
<td align="left">Ebron</td>
<td align="left">TE</td>
<td align="right">90.60055</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">CC-2100</td>
<td align="left">Charles</td>
<td align="left">Clay</td>
<td align="left">TE</td>
<td align="right">87.62130</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">HH-0225</td>
<td align="left">Hunter</td>
<td align="left">Henry</td>
<td align="left">TE</td>
<td align="right">85.74416</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JC-4300</td>
<td align="left">Jared</td>
<td align="left">Cook</td>
<td align="left">TE</td>
<td align="right">83.79069</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">VD-0100</td>
<td align="left">Vernon</td>
<td align="left">Davis</td>
<td align="left">TE</td>
<td align="right">83.44308</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JD-2550</td>
<td align="left">Jack</td>
<td align="left">Doyle</td>
<td align="left">TE</td>
<td align="right">83.36575</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">NO-0150</td>
<td align="left">Nick</td>
<td align="left">O’Leary</td>
<td align="left">TE</td>
<td align="right">77.43070</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JT-2000</td>
<td align="left">Julius</td>
<td align="left">Thomas</td>
<td align="left">TE</td>
<td align="right">73.97472</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">TE-0300</td>
<td align="left">Tyler</td>
<td align="left">Eifert</td>
<td align="left">TE</td>
<td align="right">72.50556</td>
<td align="right">17</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">JR-1150</td>
<td align="left">Jordan</td>
<td align="left">Reed</td>
<td align="left">TE</td>
<td align="right">72.44428</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">LK-0200</td>
<td align="left">Lance</td>
<td align="left">Kendricks</td>
<td align="left">TE</td>
<td align="right">72.07954</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="right">2017</td>
<td align="right">2018</td>
<td align="left">OH-0250</td>
<td align="left">O.J.</td>
<td align="left">Howard</td>
<td align="left">TE</td>
<td align="right">67.21814</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="model-performance-plots" class="section level3">
<h3>Model Performance Plots</h3>
<pre class="r"><code>truth &lt;- season.metrics %&gt;%
    filter(seas == 2017) %&gt;%
    dplyr::select(-career.year, -lst, -avg) %&gt;%
    spread(metric, value) %&gt;%
    mutate(fpts = py / 25 
                 + recy / 15 
                 + ry / 10 
                 + rec * 0.5 
                 + (tdr + tdrec + tdp) * 6 
                 + ints * -2 
                 + fuml * -2) %&gt;%
    arrange(-fpts) %&gt;%
    mutate(rnk = row_number())

rnks %&gt;%
    filter(cutoff == 2016, seas == 2017) %&gt;%
    inner_join(truth %&gt;% dplyr::select(player, seas, fpts.true = fpts)) %&gt;%
    ggplot(aes(x = fpts, y = fpts.true)) + 
    geom_point() +
    facet_wrap(&#39;pos1&#39;, scales = &#39;free&#39;) +
    theme_bw() +
    geom_abline() +
    xlab(&#39;Projected Points&#39;) +
    ylab(&#39;Actual Points&#39;)</code></pre>
<pre><code>## Joining, by = c(&quot;seas&quot;, &quot;player&quot;)</code></pre>
<p><img src="/post/2018-08-13-fantasy-football-player-rankings_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="comments" class="section level3">
<h3>Comments</h3>
<p>These predictions do not seem very good at all to me. Looking at the last plot you can see the immense variability about the 45 degree line, some of the estimates are off by very large amounts. This is maybe not surprising when you consider the very limited basis on which the “opportunity” (rushing attempts, etc) projections are made. There is a lot of information that is not captured by previous data. Allowing for smooth functions of the predictors in the rate models would probably improve the performance as well.</p>
<p>Ultimately, in my opinion a better approach to fantasy football player projection is something like what is done at <a href="https://fantasyfootballanalytics.net/2018/07/2018-fantasy-football-projections.html">Fantasy Football Analytics</a>. The approach they take is to combine the projections of lots of analysts via some weighting scheme. This would allow the incorporation of a lot more information than the models above, as well as averaging over particular analyst biases.</p>
</div>
